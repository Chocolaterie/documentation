"use strict";(self.webpackChunkschool_learn=self.webpackChunkschool_learn||[]).push([[4080],{1540:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var r=s(7624),i=s(2172);const o={sidebar_position:4,title:"TP - Pok\xe9mon Microservice MySQL",description:"TP SQL MicroService"},t="TP SQL MicroService \u2013 Pok\xe9mon",l={id:"bdd/tp/sql/tp-04",title:"TP - Pok\xe9mon Microservice MySQL",description:"TP SQL MicroService",source:"@site/docs/bdd/tp/sql/tp-04.md",sourceDirName:"bdd/tp/sql",slug:"/bdd/tp/sql/tp-04",permalink:"/documentation/docs/bdd/tp/sql/tp-04",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/bdd/tp/sql/tp-04.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"TP - Pok\xe9mon Microservice MySQL",description:"TP SQL MicroService"},sidebar:"tutorialSidebar",previous:{title:"TP - Pok\xe9mon",permalink:"/documentation/docs/bdd/tp/sql/tp-03"},next:{title:"Java POO",permalink:"/documentation/docs/category/java-poo"}},c={},a=[{value:"Objectif du TP",id:"objectif-du-tp",level:2},{value:"Contexte",id:"contexte",level:2},{value:"Exemple de requete dans le js",id:"exemple-de-requete-dans-le-js",level:3},{value:"Exemple avec Postman",id:"exemple-avec-postman",level:3},{value:"Organisation du TP",id:"organisation-du-tp",level:2},{value:"Niveau 1 \u2013 Cr\xe9ation compl\xe8te du microservice",id:"niveau-1--cr\xe9ation-compl\xe8te-du-microservice",level:3},{value:"Pr\xe9requis",id:"pr\xe9requis",level:4},{value:"Niveau 2 \u2013 Compl\xe9tion d\u2019un microservice existant",id:"niveau-2--compl\xe9tion-dun-microservice-existant",level:3},{value:"Installation",id:"installation",level:4},{value:"Contraintes techniques",id:"contraintes-techniques",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"tp-sql-microservice--pok\xe9mon",children:"TP SQL MicroService \u2013 Pok\xe9mon"}),"\n",(0,r.jsx)(n.h2,{id:"objectif-du-tp",children:"Objectif du TP"}),"\n",(0,r.jsxs)(n.p,{children:["L\u2019objectif de ce TP est de concevoir un ",(0,r.jsx)(n.strong,{children:"microservice REST"})," en ",(0,r.jsx)(n.strong,{children:"Express.js"})," capable de ",(0,r.jsx)(n.strong,{children:"retourner des donn\xe9es au format JSON"})," \xe0 partir d\u2019une base de donn\xe9es ",(0,r.jsx)(n.strong,{children:"MySQL"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Ce microservice sera destin\xe9 \xe0 \xeatre consomm\xe9 par un client (Postman, front-end, autre service, etc.)."}),"\n",(0,r.jsx)(n.h2,{id:"contexte",children:"Contexte"}),"\n",(0,r.jsxs)(n.p,{children:["Vous travaillez dans un environnement ",(0,r.jsx)(n.strong,{children:"Node.js / Express.js"}),", avec une base de donn\xe9es ",(0,r.jsx)(n.strong,{children:"MySQL"})," contenant des informations li\xe9es \xe0 l\u2019univers ",(0,r.jsx)(n.strong,{children:"Pok\xe9mon"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Le microservice devra exposer plusieurs ",(0,r.jsx)(n.strong,{children:"routes HTTP"})," permettant de consulter ces donn\xe9es."]}),"\n",(0,r.jsx)(n.h3,{id:"exemple-de-requete-dans-le-js",children:"Exemple de requete dans le js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const [pokemons] = await db.query(`\n    SELECT *\n    FROM Pokemon\n`);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"exemple-avec-postman",children:"Exemple avec Postman"}),"\n",(0,r.jsx)(n.p,{children:"Un exemple de requ\xeate et de r\xe9ponse est fourni ci-dessous :"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Screenshot",src:s(2852).c+"",width:"1214",height:"822"})}),"\n",(0,r.jsx)(n.h2,{id:"organisation-du-tp",children:"Organisation du TP"}),"\n",(0,r.jsxs)(n.p,{children:["Le TP peut \xeatre r\xe9alis\xe9 selon ",(0,r.jsx)(n.strong,{children:"deux niveaux de difficult\xe9"})," :"]}),"\n",(0,r.jsx)(n.h3,{id:"niveau-1--cr\xe9ation-compl\xe8te-du-microservice",children:"Niveau 1 \u2013 Cr\xe9ation compl\xe8te du microservice"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Initialiser un projet Node.js"}),"\n",(0,r.jsx)(n.li,{children:"Installer et configurer Express.js"}),"\n",(0,r.jsx)(n.li,{children:"Configurer la connexion \xe0 la base de donn\xe9es MySQL"}),"\n",(0,r.jsx)(n.li,{children:"Cr\xe9er l\u2019ensemble des routes REST"}),"\n",(0,r.jsx)(n.li,{children:"Tester les endpoints avec Postman"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Avoir nodeJS d'install\xe9"}),"\n",(0,r.jsx)(n.li,{children:"Etre \xe0 l'aise en JS/TS et avec les framework JS/TS"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Ce niveau est recommand\xe9 pour les \xe9tudiants souhaitant ",(0,r.jsx)(n.strong,{children:"s\u2019entra\xeener davantage"})," et mieux comprendre l\u2019architecture d\u2019un microservice."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"niveau-2--compl\xe9tion-dun-microservice-existant",children:"Niveau 2 \u2013 Compl\xe9tion d\u2019un microservice existant"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Un microservice Express.js est d\xe9j\xe0 fourni"}),"\n",(0,r.jsx)(n.li,{children:"La structure du projet est en place"}),"\n",(0,r.jsx)(n.li,{children:"La connexion \xe0 la base de donn\xe9es est d\xe9j\xe0 configur\xe9e"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.strong,{children:["Votre travail consiste \xe0 compl\xe9ter le fichier ",(0,r.jsx)(n.code,{children:"routes.js"})]})}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Avoir nodeJS d'install\xe9"}),"\n",(0,r.jsxs)(n.li,{children:["R\xe9cup\xe9rer le zip ",(0,r.jsx)(n.strong,{children:"api_pkm"})," et dezipper"]}),"\n",(0,r.jsxs)(n.li,{children:["Utiliser la commande ",(0,r.jsx)(n.code,{children:"npm install"})," dans le projet pour installer les d\xe9pendances"]}),"\n",(0,r.jsxs)(n.li,{children:["Lancer le projet avec la commande ",(0,r.jsx)(n.code,{children:"node main.js"})]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Ce niveau permet de se concentrer sur la ",(0,r.jsx)(n.strong,{children:"logique m\xe9tier et les requ\xeates SQL"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contraintes-techniques",children:"Contraintes techniques"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Langage : ",(0,r.jsx)(n.strong,{children:"JavaScript"})]}),"\n",(0,r.jsxs)(n.li,{children:["Runtime : ",(0,r.jsx)(n.strong,{children:"Node.js"})]}),"\n",(0,r.jsxs)(n.li,{children:["Framework : ",(0,r.jsx)(n.strong,{children:"Express.js"})]}),"\n",(0,r.jsxs)(n.li,{children:["Base de donn\xe9es : ",(0,r.jsx)(n.strong,{children:"MySQL"})]}),"\n",(0,r.jsxs)(n.li,{children:["Librairie MySQL : ",(0,r.jsx)(n.strong,{children:"mysql2"})]}),"\n",(0,r.jsxs)(n.li,{children:["Format des r\xe9ponses : ",(0,r.jsx)(n.strong,{children:"JSON"})]}),"\n",(0,r.jsxs)(n.li,{children:["Test des endpoints : ",(0,r.jsx)(n.strong,{children:"Postman"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"En gros il faut completer le fichier routes.js :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const express = require('express');\nconst router = express.Router();\nconst { httpApiResponse } = require('./http-library');\nconst db = require ('./mysql.js');\n\n/**\n * GET /pokemons\n * Retrieve all pokemon species\n */\nrouter.get('/pokemons', async (req, res) => {\n\n    const [pokemons] = // TODO commence par db.query\n    \n    return httpApiResponse(res, 200, 'Pokemons retrieved successfully', pokemons);\n});\n\n/**\n * GET /players/:playerId\n * Retrieve basic player information\n */\nrouter.get('/players/:playerId', async (req, res) => {\n    const { playerId } = req.params;\n\n    const [[player]] = // TODO commence par db.query\n\n    if (!player) {\n        return httpApiResponse(res, 404, 'Player not found', null);\n    }\n\n    return httpApiResponse(res, 200, 'Player retrieved successfully', player);\n});\n\n/**\n * GET /players/:playerId/inventory\n * Retrieve inventory and items of a player\n */\nrouter.get('/players/:playerId/inventory', async (req, res) => {\n    const { playerId } = req.params;\n\n    const [inventory] = // TODO commence par db.query\n\n    return httpApiResponse(res, 200, 'Inventory retrieved successfully', inventory);\n});\n\n/**\n * GET /players/:playerId/pokemons\n * Retrieve all pokemons owned by a player\n */\nrouter.get('/players/:playerId/pokemons', async (req, res) => {\n    const { playerId } = req.params;\n\n    const [pokemons] = // TODO commence par db.query\n    return httpApiResponse(res, 200, 'Player pokemons retrieved successfully', pokemons);\n});\n\n/**\n * GET /players/:playerId/pokemons/:pokemonPlayerId\n * Retrieve full details of a specific pokemon owned by a player\n */\nrouter.get('/players/:playerId/pokemons/:pokemonPlayerId', async (req, res) => {\n    const { playerId, pokemonPlayerId } = req.params;\n\n    const [[pokemon]] = await  // TODO commence par db.query\n\n    if (!pokemon) {\n        return httpApiResponse(res, 404, 'Pokemon not found', null);\n    }\n\n    return httpApiResponse(res, 200, 'Pokemon retrieved successfully', pokemon);\n});\n\n/**\n * GET /pokemons/:pokemonId/abilities\n * Retrieve abilities available for a pokemon species\n */\nrouter.get('/pokemons/:pokemonId/abilities', async (req, res) => {\n    const { pokemonId } = req.params;\n\n    const [abilities] = await // TODO commence par db.query\n\n    return httpApiResponse(res, 200, 'Pokemon abilities retrieved successfully', abilities);\n});\n\n/**\n * GET /pokemon-players/:pokemonPlayerId/abilities\n * Retrieve abilities of a pokemon owned by a player\n */\nrouter.get('/pokemon-players/:pokemonPlayerId/abilities', async (req, res) => {\n    const { pokemonPlayerId } = req.params;\n\n    const [abilities] = await // TODO commence par db.query\n\n    return httpApiResponse(res, 200, 'Pokemon player abilities retrieved successfully', abilities);\n});\n\n\n// Exporter le router\nmodule.exports = router;\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},2852:(e,n,s)=>{s.d(n,{c:()=>r});const r=s.p+"assets/images/ex_postman-4b48f3504ecddc173a923c8e1b822988.png"},2172:(e,n,s)=>{s.d(n,{I:()=>l,M:()=>t});var r=s(1504);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);