"use strict";(self.webpackChunkschool_learn=self.webpackChunkschool_learn||[]).push([[5432],{16648:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var i=n(17624),t=n(4552);const r={sidebar_position:4},a="TP Store API - Partie 4 Messages",l={id:"spring/tp/back-api/tp-4-message-i18n",title:"TP Store API - Partie 4 Messages",description:"Dur\xe9e estim\xe9e : 30min - 1h",source:"@site/docs/spring/tp/back-api/tp-4-message-i18n.md",sourceDirName:"spring/tp/back-api",slug:"/spring/tp/back-api/tp-4-message-i18n",permalink:"/documentation/docs/spring/tp/back-api/tp-4-message-i18n",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/spring/tp/back-api/tp-4-message-i18n.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"TP Store API - Partie 3",permalink:"/documentation/docs/spring/tp/back-api/tp-3-service"},next:{title:"TP Store API - Partie 5 Tests",permalink:"/documentation/docs/spring/tp/back-api/tp-5-tests"}},c={},o=[{value:"\xc9nonc\xe9",id:"\xe9nonc\xe9",level:2},{value:"Mise en place de l&#39;internationalisation",id:"mise-en-place-de-linternationalisation",level:2},{value:"Messages attendus",id:"messages-attendus",level:2},{value:"getAll",id:"getall",level:3},{value:"getId",id:"getid",level:3},{value:"delete",id:"delete",level:3},{value:"save",id:"save",level:3}];function d(e){const s={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"tp-store-api---partie-4-messages",children:"TP Store API - Partie 4 Messages"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Dur\xe9e estim\xe9e : 30min - 1h"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"\xe9nonc\xe9",children:"\xc9nonc\xe9"}),"\n",(0,i.jsxs)(s.p,{children:["Dans cette partie, vous allez ajouter la gestion des ",(0,i.jsx)(s.strong,{children:"messages m\xe9tier"})," associ\xe9s aux traitements dans vos ",(0,i.jsx)(s.strong,{children:"Services"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Le mod\xe8le de r\xe9ponse doit contenir les \xe9l\xe9ments suivants :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"code"})," : le code de statut m\xe9tier"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"message"})," : le message associ\xe9 (multilingue)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"data"})," : les donn\xe9es retourn\xe9es (ex. un article ou une liste d'articles)"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Vous devez mettre en place un m\xe9canisme permettant de traduire les messages en ",(0,i.jsx)(s.strong,{children:"fran\xe7ais"})," et en ",(0,i.jsx)(s.strong,{children:"anglais"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"mise-en-place-de-linternationalisation",children:"Mise en place de l'internationalisation"}),"\n",(0,i.jsx)(s.p,{children:"Pour g\xe9rer la traduction des messages m\xe9tier, vous pouvez vous aidez des classes utilitaire propos\xe9 ci-dessous:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"LocaleConfig.java"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-java",children:"@Configuration\npublic class LocaleConfig\n{\n    @Bean\n    public LocaleResolver localeResolver() {\n        // Locale forc\xe9e en anglais\n        return new FixedLocaleResolver(Locale.ENGLISH);\n    }\n}\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"LocaleHelper.java"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-java",children:"@Component\npublic class LocaleHelper {\n\n    private final MessageSource messageSource;\n\n    public LocaleHelper(MessageSource messageSource) {\n        this.messageSource = messageSource;\n    }\n\n    public String i18n(String key){\n        return messageSource.getMessage(key, null, LocaleContextHolder.getLocale());\n    }\n}\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Exemple d'utilisation :"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-java",children:'// Attention d\xe9pend si injection @Autowired ou par constructeur)\n@Autowired\nLocaleHelper lH;\n\n...\n\nString monMessageTraduit = lH.i18n("La_Cle_De_Mon_Message");\n\n'})}),"\n",(0,i.jsx)(s.h2,{id:"messages-attendus",children:"Messages attendus"}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.p,{children:["Les exemples ci-dessous sont fournis en fran\xe7ais.",(0,i.jsx)(s.br,{}),"\n","\xc0 vous d'ajouter les \xe9quivalents en anglais dans vos fichiers de traduction."]})}),"\n",(0,i.jsx)(s.h3,{id:"getall",children:"getAll"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["R\xe9ponse : ",(0,i.jsx)(s.strong,{children:"La liste des articles a \xe9t\xe9 r\xe9cup\xe9r\xe9e avec succ\xe8s"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"getid",children:"getId"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Si l'article est trouv\xe9 : ",(0,i.jsx)(s.strong,{children:"L'article a \xe9t\xe9 r\xe9cup\xe9r\xe9 avec succ\xe8s"})]}),"\n",(0,i.jsxs)(s.li,{children:["Si l'article n'est pas trouv\xe9 : ",(0,i.jsx)(s.strong,{children:"L'article n'existe pas"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"delete",children:"delete"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Si l'article est supprim\xe9 : ",(0,i.jsx)(s.strong,{children:"L'article a \xe9t\xe9 supprim\xe9 avec succ\xe8s"})]}),"\n",(0,i.jsxs)(s.li,{children:["Si l'article n'existe pas : ",(0,i.jsx)(s.strong,{children:"L'article n'existe pas"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"save",children:"save"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Si l'id n'existe pas : ",(0,i.jsx)(s.strong,{children:"Article cr\xe9\xe9 avec succ\xe8s"})]}),"\n",(0,i.jsxs)(s.li,{children:["Si l'id existe d\xe9j\xe0 : ",(0,i.jsx)(s.strong,{children:"Article modifi\xe9 avec succ\xe8s"})]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,t.M)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4552:(e,s,n)=>{n.d(s,{I:()=>l,M:()=>a});var i=n(11504);const t={},r=i.createContext(t);function a(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);