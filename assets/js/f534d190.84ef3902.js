"use strict";(self.webpackChunkschool_learn=self.webpackChunkschool_learn||[]).push([[5612],{76108:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>l,metadata:()=>c,toc:()=>o});var r=n(17624),i=n(4552);const l={id:"tp-nodejs-bdd-abstrait-01",title:"TP Node.js BDD - 01",sidebar_label:"TP BDD Abstrait 01"},t="Sujet / Cahier des charges \u2014 API Articles Express.js avec DAO (Mongoose + Sequelize)",c={id:"nodejs/tp-bdd-abstrait/tp-nodejs-bdd-abstrait-01",title:"TP Node.js BDD - 01",description:"Contexte",source:"@site/docs/nodejs/tp-bdd-abstrait/tp-01.md",sourceDirName:"nodejs/tp-bdd-abstrait",slug:"/nodejs/tp-bdd-abstrait/tp-nodejs-bdd-abstrait-01",permalink:"/documentation/docs/nodejs/tp-bdd-abstrait/tp-nodejs-bdd-abstrait-01",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/nodejs/tp-bdd-abstrait/tp-01.md",tags:[],version:"current",frontMatter:{id:"tp-nodejs-bdd-abstrait-01",title:"TP Node.js BDD - 01",sidebar_label:"TP BDD Abstrait 01"},sidebar:"tutorialSidebar",previous:{title:"TP Abstraction BDD",permalink:"/documentation/docs/category/tp-abstraction-bdd"},next:{title:"TP BDD Abstrait 02",permalink:"/documentation/docs/nodejs/tp-bdd-abstrait/tp-nodejs-bdd-abstrait-02"}},d={},o=[{value:"Contexte",id:"contexte",level:2},{value:"Objectifs p\xe9dagogiques",id:"objectifs-p\xe9dagogiques",level:2},{value:"Sp\xe9cification API (URLs identiques au projet de r\xe9f\xe9rence)",id:"sp\xe9cification-api-urls-identiques-au-projet-de-r\xe9f\xe9rence",level:2},{value:"Gestion des Articles",id:"gestion-des-articles",level:3},{value:"Exemple pour GET <code>/articles</code>",id:"exemple-pour-get-articles",level:4},{value:"Erreur possible avec le POST",id:"erreur-possible-avec-le-post",level:3},{value:"Erreur possible avec CORS",id:"erreur-possible-avec-cors",level:3},{value:"Conseils",id:"conseils",level:2},{value:"Niveau d\xe9butant",id:"niveau-d\xe9butant",level:3},{value:"Niveau \xe0 l&#39;aise",id:"niveau-\xe0-laise",level:3}];function a(e){const s={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"sujet--cahier-des-charges--api-articles-expressjs-avec-dao-mongoose--sequelize",children:"Sujet / Cahier des charges \u2014 API Articles Express.js avec DAO (Mongoose + Sequelize)"}),"\n",(0,r.jsx)(s.h2,{id:"contexte",children:"Contexte"}),"\n",(0,r.jsxs)(s.p,{children:["Vous devez cr\xe9er une API backend ",(0,r.jsx)(s.strong,{children:"Node.js + Express.js"})," qui g\xe8re des ",(0,r.jsx)(s.strong,{children:"articles"})," en respectant l'",(0,r.jsx)(s.strong,{children:"abstraction DAO"})," vue en cours."]}),"\n",(0,r.jsxs)(s.p,{children:["L'API doit exposer ",(0,r.jsx)(s.strong,{children:"exactement les m\xeames URLs"})," et le ",(0,r.jsx)(s.strong,{children:"m\xeame format de r\xe9ponses"})," que le projet Express de r\xe9f\xe9rence ",(0,r.jsx)(s.em,{children:"ApiArticle"})," afin que les \xe9tudiants puissent brancher leur ",(0,r.jsx)(s.strong,{children:"ancien front Angular"})," sans modification."]}),"\n",(0,r.jsx)(s.h2,{id:"objectifs-p\xe9dagogiques",children:"Objectifs p\xe9dagogiques"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Mettre en place une architecture \u201cclean\u201d avec s\xe9paration des responsabilit\xe9s :","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Routes \u2192 Services \u2192 DAO (abstraction)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Impl\xe9menter ",(0,r.jsx)(s.strong,{children:"2 DAO"})," interchangeables :","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"DAOArticleMongoose"})," (MongoDB via Mongoose)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"DAOArticleSequelize"})," (SQL via Sequelize)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Conserver ",(0,r.jsx)(s.strong,{children:"une interface d'abstraction"})," ",(0,r.jsx)(s.code,{children:"IDAOArticle"})," (contrat commun), utilis\xe9e par le Service, jamais les impl\xe9mentations directes."]}),"\n",(0,r.jsxs)(s.li,{children:["Permettre de ",(0,r.jsx)(s.strong,{children:"s\xe9lectionner la DAO"})," via la configuration aux choix (jspur, ENV, etc.)."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"sp\xe9cification-api-urls-identiques-au-projet-de-r\xe9f\xe9rence",children:"Sp\xe9cification API (URLs identiques au projet de r\xe9f\xe9rence)"}),"\n",(0,r.jsxs)(s.p,{children:["Base URL (exemple) : ",(0,r.jsx)(s.code,{children:"http://localhost:3000"})]}),"\n",(0,r.jsx)(s.h3,{id:"gestion-des-articles",children:"Gestion des Articles"}),"\n",(0,r.jsx)(s.p,{children:"Pour les Urls vous pouvez faire les m\xeame que ce projet :"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://github.com/Chocolaterie/ApiArticle",children:"https://github.com/Chocolaterie/ApiArticle"})}),"\n",(0,r.jsx)(s.p,{children:"Afin de pouvoir connecter votre ancien projet Angular dessus."}),"\n",(0,r.jsxs)(s.h4,{id:"exemple-pour-get-articles",children:["Exemple pour GET ",(0,r.jsx)(s.code,{children:"/articles"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["But : r\xe9cup\xe9rer ",(0,r.jsx)(s.strong,{children:"tous"})," les articles."]}),"\n",(0,r.jsx)(s.li,{children:"R\xe9ponse (format impos\xe9) :"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "code": "200",\n  "message": "La liste des articles a \xe9t\xe9 r\xe9cup\xe9r\xe9e avec succ\xe8s",\n  "data": [ /* tableau d\'articles */ ]\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"erreur-possible-avec-le-post",children:"Erreur possible avec le POST"}),"\n",(0,r.jsxs)(s.p,{children:["Pour pouvoir envoyer du JSON en POST (comme vu dans un autre module),",(0,r.jsx)(s.br,{}),"\n","il faut autoriser Express \xe0 parser le body des requ\xeates."]}),"\n",(0,r.jsxs)(s.p,{children:["Ajoutez par exemple dans ",(0,r.jsx)(s.code,{children:"app.js"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"// Autoriser l'envoi de JSON\napp.use(express.json());\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Sans cette ligne, ",(0,r.jsx)(s.code,{children:"req.body"})," sera ",(0,r.jsx)(s.code,{children:"undefined"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"erreur-possible-avec-cors",children:"Erreur possible avec CORS"}),"\n",(0,r.jsx)(s.p,{children:"Si vous testez votre front avec votre back, il est possible que les requ\xeates soient bloqu\xe9es \xe0 cause du CORS."}),"\n",(0,r.jsx)(s.p,{children:"Dans le cadre du TP, vous pouvez l'autoriser temporairement avec :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"// Autoriser le CORS (pour le TP)\napp.use(cors());\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Cela implique d'installer le package ",(0,r.jsx)(s.code,{children:"cors"})," dans votre projet :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"npm install cors\n"})}),"\n",(0,r.jsx)(s.h2,{id:"conseils",children:"Conseils"}),"\n",(0,r.jsx)(s.h3,{id:"niveau-d\xe9butant",children:"Niveau d\xe9butant"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Cr\xe9ez un projet vide."}),"\n",(0,r.jsx)(s.li,{children:"Basez-vous sur la d\xe9mo vue en cours."}),"\n",(0,r.jsx)(s.li,{children:"Avancez \xe9tape par \xe9tape, sans tout faire d'un coup."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Ordre conseill\xe9 :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Configurer ",(0,r.jsx)(s.code,{children:"app.js"})]}),"\n",(0,r.jsx)(s.li,{children:"Cr\xe9er les routes (commencer par une seule URL)"}),"\n",(0,r.jsxs)(s.li,{children:["Cr\xe9er le service (ex : ",(0,r.jsx)(s.code,{children:"getAll"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["Cr\xe9er une DAO avec une seule m\xe9thode (",(0,r.jsx)(s.code,{children:"findAll"}),")"]}),"\n",(0,r.jsx)(s.li,{children:"Connecter Routes \u2192 Service \u2192 DAO"}),"\n",(0,r.jsx)(s.li,{children:"Tester la premi\xe8re URL"}),"\n",(0,r.jsx)(s.li,{children:"Prendre du recul (v\xe9rifier la structure, la coh\xe9rence)"}),"\n",(0,r.jsx)(s.li,{children:"Commit & push"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Ensuite :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Impl\xe9menter progressivement les autres fonctionnalit\xe9s"}),"\n",(0,r.jsx)(s.li,{children:"Tester avec votre ancien front Angular"}),"\n",(0,r.jsx)(s.li,{children:"Corriger si n\xe9cessaire"}),"\n",(0,r.jsx)(s.li,{children:"Finaliser le projet"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"niveau-\xe0-laise",children:"Niveau \xe0 l'aise"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Partir de la d\xe9mo existante."}),"\n",(0,r.jsx)(s.li,{children:"Renommer le projet proprement."}),"\n",(0,r.jsx)(s.li,{children:"Initialiser un d\xe9p\xf4t Git."}),"\n",(0,r.jsx)(s.li,{children:"Changer la base de donn\xe9es."}),"\n",(0,r.jsx)(s.li,{children:"R\xe9cup\xe9rer uniquement la logique m\xe9tier du projet ApiArticle (service Article)."}),"\n",(0,r.jsx)(s.li,{children:"Impl\xe9menter les fonctions manquantes dans la DAO."}),"\n",(0,r.jsx)(s.li,{children:"Tester l'API."}),"\n",(0,r.jsx)(s.li,{children:"Tester avec le front Angular."}),"\n",(0,r.jsx)(s.li,{children:"Finaliser et nettoyer le code."}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,i.M)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},4552:(e,s,n)=>{n.d(s,{I:()=>c,M:()=>t});var r=n(11504);const i={},l=r.createContext(i);function t(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);