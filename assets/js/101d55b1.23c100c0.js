"use strict";(self.webpackChunkschool_learn=self.webpackChunkschool_learn||[]).push([[7056],{9148:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var s=r(7624),t=r(2172);const a={sidebar_position:4},i="TP Angular (Partie 2)",o={id:"js-avance/tp/tp-angular-2",title:"TP Angular (Partie 2)",description:"Dur\xe9e estim\xe9e : 30min - 1h",source:"@site/docs/js-avance/tp/tp-angular-2.md",sourceDirName:"js-avance/tp",slug:"/js-avance/tp/tp-angular-2",permalink:"/documentation/docs/js-avance/tp/tp-angular-2",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/js-avance/tp/tp-angular-2.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"TP Angular (Partie 1)",permalink:"/documentation/docs/js-avance/tp/tp-angular-1"},next:{title:"TP Angular (Partie 3)",permalink:"/documentation/docs/js-avance/tp/tp-angular-3"}},c={},l=[{value:"\xc9nonc\xe9",id:"\xe9nonc\xe9",level:2},{value:"Models",id:"models",level:2},{value:"Service",id:"service",level:2},{value:"Contr\xf4leur TypeScript",id:"contr\xf4leur-typescript",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"tp-angular-partie-2",children:"TP Angular (Partie 2)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dur\xe9e estim\xe9e : 30min - 1h"})}),"\n",(0,s.jsx)(n.h2,{id:"\xe9nonc\xe9",children:"\xc9nonc\xe9"}),"\n",(0,s.jsx)(n.p,{children:"Nous allons \xe0 pr\xe9sent changer la mani\xe8re de r\xe9cup\xe9rer les films."}),"\n",(0,s.jsxs)(n.p,{children:["Pr\xe9c\xe9demment, la liste des films \xe9tait en m\xe9moire, directement dans le contr\xf4leur.",(0,s.jsx)(n.br,{}),"\n","\xc0 pr\xe9sent, nous allons interroger une API locale, par exemple :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"http://localhost:3000/movies\n"})}),"\n",(0,s.jsxs)(n.p,{children:["L\u2019API locale se trouve dans ce d\xe9p\xf4t GitHub :",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"https://github.com/Chocolaterie/ApiArticle",children:"https://github.com/Chocolaterie/ApiArticle"})]}),"\n",(0,s.jsxs)(n.p,{children:["C\u2019est une application Express.js sans base de donn\xe9es.",(0,s.jsx)(n.br,{}),"\n","Vous pouvez la cloner, ex\xe9cuter ",(0,s.jsx)(n.code,{children:"npm install"}),", puis lancer le serveur avec :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"node app.js\n"})}),"\n",(0,s.jsxs)(n.p,{children:["L\u2019URL ",(0,s.jsx)(n.code,{children:"http://localhost:3000/movies"})," retourne par exemple :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "code": "200",\n  "message": "La liste des film a \xe9t\xe9 r\xe9cup\xe9r\xe9e avec succ\xe8s !",\n  "data": [\n    {\n      "id": 1,\n      "slug": "1",\n      "title": "Inception",\n      "year": 2010,\n      "author": "Christopher Nolan",\n      "duration": 125,\n      "genre": "Action, Fantasy",\n      "synopsis": "Un voleur s\'infiltre dans les r\xeaves pour d\xe9rober des secrets.",\n      "cover": "https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_.jpg",\n      "rating": 4.6\n    },\n    {\n      "id": 2,\n      "slug": "2",\n      "title": "The Dark Knight",\n      "year": 2018,\n      "author": "Roar Uthaug",\n      "duration": 125,\n      "genre": "Action, Fantasy",\n      "synopsis": "Batman affronte le Joker pour sauver Gotham.",\n      "cover": "https://image.tmdb.org/t/p/w500/qJ2tW6WMUDux911r6m7haRef0WH.jpg",\n      "rating": 5\n    },\n    {\n      "id": 3,\n      "slug": "3",\n      "title": "Interstellar",\n      "year": 2018,\n      "author": "Christopher Nolan",\n      "duration": 125,\n      "genre": "Action, Fantasy",\n      "synopsis": "Une \xe9quipe voyage \xe0 travers un trou de ver pour sauver l\'humanit\xe9.",\n      "cover": "https://m.media-amazon.com/images/M/MV5BYzdjMDAxZGItMjI2My00ODA1LTlkNzItOWFjMDU5ZDJlYWY3XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg",\n      "rating": 4\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"models",children:"Models"}),"\n",(0,s.jsx)(n.p,{children:"Nous aurons deux mod\xe8les qui serviront au mapping des r\xe9ponses JSON :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Movie"})," : repr\xe9sente la structure d\u2019un film."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ApiResponse"})," : repr\xe9sente la structure d\u2019une r\xe9ponse API m\xe9tier. Le champ ",(0,s.jsx)(n.code,{children:"data"})," est g\xe9n\xe9rique."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"service",children:"Service"}),"\n",(0,s.jsxs)(n.p,{children:["Pour effectuer les appels HTTP, cr\xe9ez un service que vous pouvez nommer ",(0,s.jsx)(n.code,{children:"MovieService"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Ce service peut contenir une m\xe9thode ",(0,s.jsx)(n.code,{children:"getMovies"})," qui retourne un ",(0,s.jsx)(n.code,{children:"Observable<ApiResponse<Movie[]>>"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"contr\xf4leur-typescript",children:"Contr\xf4leur TypeScript"}),"\n",(0,s.jsxs)(n.p,{children:["Dans le contr\xf4leur, vous pouvez appeler le service dans le cycle de vie ",(0,s.jsx)(n.code,{children:"ngOnInit"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Ainsi, l\u2019appel API sera d\xe9clench\xe9 automatiquement au chargement initial de la page."})]})}function u(e={}){const{wrapper:n}={...(0,t.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2172:(e,n,r)=>{r.d(n,{I:()=>o,M:()=>i});var s=r(1504);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);