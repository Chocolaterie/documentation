"use strict";(self.webpackChunkschool_learn=self.webpackChunkschool_learn||[]).push([[1084],{8196:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>a});var t=s(7624),r=s(2172);const i={sidebar_position:8},o="TP Eni Store API (Partie 8)",l={id:"spring-security/tp/tp-8",title:"TP Eni Store API (Partie 8)",description:"Note: Avant de d\xe9marrer ce TP, il convient d\u2019avoir suivi tout les modules et d\u2019avoir r\xe9alis\xe9 les TP propos\xe9s.",source:"@site/docs/spring-security/tp/tp-8.md",sourceDirName:"spring-security/tp",slug:"/spring-security/tp/tp-8",permalink:"/documentation/docs/spring-security/tp/tp-8",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/spring-security/tp/tp-8.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"TP Eni Store API (Partie 7)",permalink:"/documentation/docs/spring-security/tp/tp-7"},next:{title:"Android Kotlin",permalink:"/documentation/docs/category/android-kotlin"}},c={},a=[{value:"Enonce",id:"enonce",level:2},{value:"Quelques pistes",id:"quelques-pistes",level:2},{value:"Dans le Metier",id:"dans-le-metier",level:3},{value:"Dans les routes",id:"dans-les-routes",level:3}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.M)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"tp-eni-store-api-partie-8",children:"TP Eni Store API (Partie 8)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Avant de d\xe9marrer ce TP, il convient d\u2019avoir suivi tout les modules et d\u2019avoir r\xe9alis\xe9 les TP propos\xe9s."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Dur\xe9e Estim\xe9e : 1-3h"})}),"\n",(0,t.jsx)(n.h2,{id:"enonce",children:"Enonce"}),"\n",(0,t.jsx)(n.p,{children:"Apr\xe8s avoir explor\xe9 toutes les fonctionnalit\xe9s abord\xe9es dans le cours, nous pouvons d\xe9sormais approfondir notre application."}),"\n",(0,t.jsx)(n.p,{children:"Dans ce TP, nous allons mettre en place des r\xe9ponses m\xe9tier plut\xf4t que de simplement renvoyer des donn\xe9es sans aucun moyen de conna\xeetre le r\xe9sultat de nos traitements m\xe9tier."}),"\n",(0,t.jsx)(n.p,{children:"Plut\xf4t que de remplacer toutes les routes existantes, nous allons en cr\xe9er de nouvelles avec la m\xeame structure d'URL, \xe0 l'exception du pr\xe9fixe qui sera /api/v2."}),"\n",(0,t.jsx)(n.p,{children:"D'une part, nous \xe9tudierons les implications d'une telle migration dans un projet et pourquoi il est essentiel de proc\xe9der avec pr\xe9caution."}),"\n",(0,t.jsx)(n.h2,{id:"quelques-pistes",children:"Quelques pistes"}),"\n",(0,t.jsx)(n.h3,{id:"dans-le-metier",children:"Dans le Metier"}),"\n",(0,t.jsx)(n.p,{children:"\xc9tant donn\xe9 qu'il est n\xe9cessaire de maintenir le fonctionnement des anciennes routes, vous devrez probablement dupliquer des fonctions dans la couche m\xe9tier/service."}),"\n",(0,t.jsx)(n.p,{children:"Cela permettra de conserver une version avec l'ancienne signature qui appellera les versions migr\xe9es pour garantir un fonctionnement r\xe9tro-compatible."}),"\n",(0,t.jsx)(n.p,{children:"Exemple pour getArticles"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * @deprecated Cette m\xe9thode est obsol\xe8te (api v1). Utilisez {@link #getArticles()} \xe0 la place.\n */\n@Deprecated\nList<Article> getArticles_Deprecated() {\n    // On utilise quand m\xeame la nouvelle version afin de maintenir une uniformit\xe9 dans la logique m\xe9tier et les r\xe8gles de gestion\n    ServiceResponse response = getArticles();\n\n    // Cependant, nous allons retourner uniquement la liste des articles dans la r\xe9ponse\n    // Puisque dans l'API v1, nous r\xe9cup\xe9rons uniquement les donn\xe9es de la DAO.\n    return response.data;\n}\n\n/**\n * M\xe9thode \xe0 jour\n */\nServiceResponse getArticles() {\n    // le nouveau code\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"dans-les-routes",children:"Dans les routes"}),"\n",(0,t.jsxs)(n.p,{children:["Voici une route de l'api v1 qui maintenant utilise ",(0,t.jsx)(n.strong,{children:"getArticles_Deprecated"})," au lieu de ",(0,t.jsx)(n.strong,{children:"getArticles"})," :"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["La signature reste la m\xeame, donc le retour est de type ",(0,t.jsx)(n.code,{children:"List<Article>"})]}),"\n",(0,t.jsx)(n.li,{children:"Cependant, on utilise une version d\xe9pr\xe9ci\xe9e du service"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public List<Article> getArticles(){\n    return articleService.getArticles_Deprecated();\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Et la route api v2 :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["La signature reste la m\xeame, donc le retour est de type ",(0,t.jsx)(n.code,{children:"ServiceResponse"})]}),"\n",(0,t.jsx)(n.li,{children:"On utilise une m\xe9thode \xe0 jour du Service"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public ServiceResponse getArticles(){\n    return articleService.getArticles();\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},2172:(e,n,s)=>{s.d(n,{I:()=>l,M:()=>o});var t=s(1504);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);