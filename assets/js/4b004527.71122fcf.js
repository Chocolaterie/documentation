"use strict";(self.webpackChunkschool_learn=self.webpackChunkschool_learn||[]).push([[7564],{31660:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var s=t(17624),r=t(4552);const i={sidebar_position:7},o="TP Android - Partie 06 (Plus)",c={id:"android/tp/compose/tp-6-plus",title:"TP Android - Partie 06 (Plus)",description:"Dur\xe9e estim\xe9e : ind\xe9termin\xe9e (3h)",source:"@site/docs/android/tp/compose/tp-6-plus.md",sourceDirName:"android/tp/compose",slug:"/android/tp/compose/tp-6-plus",permalink:"/documentation/docs/android/tp/compose/tp-6-plus",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/android/tp/compose/tp-6-plus.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"TP Android - Partie 06",permalink:"/documentation/docs/android/tp/compose/tp-6"},next:{title:"TP Android - Partie 07",permalink:"/documentation/docs/android/tp/compose/tp-7"}},l={},a=[{value:"\xc9nonc\xe9",id:"\xe9nonc\xe9",level:2},{value:"Exemple d\u2019utilisation c\xf4t\xe9 Postman",id:"exemple-dutilisation-c\xf4t\xe9-postman",level:3}];function d(e){const n={blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"tp-android---partie-06-plus",children:"TP Android - Partie 06 (Plus)"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dur\xe9e estim\xe9e : ind\xe9termin\xe9e (3h)"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\xe9nonc\xe9",children:"\xc9nonc\xe9"}),"\n",(0,s.jsxs)(n.p,{children:["Vous allez \xe0 pr\xe9sent modifier le back local afin d\u2019injecter les ",(0,s.jsx)(n.em,{children:"middlewares"})," qui v\xe9rifient si l\u2019utilisateur est authentifi\xe9 via le token JWT (",(0,s.jsx)(n.em,{children:"Bearer Token"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["Exemple pour injecter le middleware c\xf4t\xe9 back sur l\u2019URL qui r\xe9cup\xe8re tous les articles (",(0,s.jsx)(n.code,{children:"middlewareVerifyToken"}),") :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const { middlewareVerifyToken } = require(\'../core/middlewares\');\n\n...\n\n/**\n * Route GET : Pour r\xe9cup\xe9rer tous les articles\n */\nrouter.get("/", middlewareVerifyToken, async (request, response) => {\n    // R\xe9cup\xe9rer une liste/tableau d\u2019articles\n    const articles = DB_Articles;\n\n    // Retourner les articles dans la r\xe9ponse JSON\n    return httpApiResponse(\n        response,\n        "200",\n        "La liste des articles a \xe9t\xe9 r\xe9cup\xe9r\xe9e avec succ\xe8s !",\n        articles\n    );\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"exemple-dutilisation-c\xf4t\xe9-postman",children:"Exemple d\u2019utilisation c\xf4t\xe9 Postman"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Screenshot",src:t(79196).c+"",width:"971",height:"704"})}),"\n",(0,s.jsxs)(n.p,{children:["Le but du TP est donc, c\xf4t\xe9 mobile, de ",(0,s.jsx)(n.strong,{children:"stocker le token en cache"})," lorsque vous \xeates connect\xe9(e), afin de pouvoir envoyer ce token dans le header des requ\xeates n\xe9cessitant une authentification",(0,s.jsx)(n.br,{}),"\n","(c\u2019est \xe0 vous de placer le middleware c\xf4t\xe9 back puisque ce TP est un TP bonus)."]}),"\n",(0,s.jsxs)(n.p,{children:["\xc9tant donn\xe9 que c\u2019est un TP \xab plus plus \xbb, il faut tester ce qui se passe si le token est ",(0,s.jsx)(n.strong,{children:"expir\xe9"})," ou ",(0,s.jsx)(n.strong,{children:"invalide"}),", c\xf4t\xe9 mobile/front, de mani\xe8re ",(0,s.jsx)(n.em,{children:"user-friendly"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Exemple :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Si le token est expir\xe9 \u2192 afficher une popup indiquant qu\u2019il faut se reconnecter, puis rediriger vers la page de connexion."}),"\n",(0,s.jsx)(n.li,{children:"Si on arrive sur la page article avec un mauvais token \u2192 redirection vers la page login, puisque de toute fa\xe7on l\u2019API renverra une erreur m\xe9tier."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},79196:(e,n,t)=>{t.d(n,{c:()=>s});const s=t.p+"assets/images/ex_articles_token-fdbb0495425c58fa8386289a8f37ee19.png"},4552:(e,n,t)=>{t.d(n,{I:()=>c,M:()=>o});var s=t(11504);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);